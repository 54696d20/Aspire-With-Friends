@using AspireApp.Web.Services
@inject NotificationService NotificationService

<h3>Real-Time Notifications</h3>

@if (!string.IsNullOrEmpty(Message))
{
    <div class="alert alert-info">@Message</div>
}

@code {
    private string? Message;

    protected override async Task OnInitializedAsync()
    {
        NotificationService.OnNotificationReceived += async (msg) =>
        {
            Message = msg;
            Console.WriteLine($"ðŸ””!!!!!! Message !!!!!!! received in component: {msg}");
            await InvokeAsync(StateHasChanged);
        };
        
        await NotificationService.StartAsync();
    }
}